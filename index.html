<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Special Birthday Wish for Lipika!</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,700&family=Poppins:wght@500&family=Great+Vibes&family=Pacifico&display=swap" rel="stylesheet">
<style>
:root {
    --primary-color: #ff69b4; /* Hot Pink */
    --secondary-color: #ffd700; /* Gold */
    --bg-color-1: #1d0f33;
    --bg-color-2: #4a0072;
    --bg-color-3: #0d0124;
}

body {
    margin: 0;
    padding: 30px;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: linear-gradient(135deg, var(--bg-color-1), var(--bg-color-2), var(--bg-color-3));
    background-size: 400% 400%;
    animation: gradient-animation 15s ease infinite;
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
    color: white;
    cursor: crosshair;
}

@keyframes gradient-animation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* --- WAVY RIBBON BORDER WITH SATIN COLOR --- */
.ribbon {
    position: fixed;
    z-index: 998;
    background-color: var(--primary-color);
    background-image: linear-gradient(
        -45deg,
        rgba(255, 255, 255, 0.25) 25%,
        transparent 25%,
        transparent 50%,
        rgba(255, 255, 255, 0.25) 50%,
        rgba(255, 255, 255, 0.25) 75%,
        transparent 75%,
        transparent
    );
    background-size: 60px 60px;
    animation: shimmer 4s linear infinite;
    filter: drop-shadow(0 0 8px rgba(0,0,0,0.5));
    border: 1px solid var(--secondary-color);
}

@keyframes shimmer {
    to { background-position: -60px 0; }
}

.ribbon-top { top: 0; left: 0; width: 100%; height: 35px; clip-path: url(#wave-top); }
.ribbon-bottom { bottom: 0; left: 0; width: 100%; height: 35px; clip-path: url(#wave-bottom); }
.ribbon-left { top: 0; left: 0; width: 35px; height: 100%; clip-path: url(#wave-left); }
.ribbon-right { top: 0; right: 0; width: 35px; height: 100%; clip-path: url(#wave-right); }

/* Floating Emojis */
.gift-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 1001;
}
.floating-emoji {
    position: absolute;
    animation: float-around 10s ease-in-out infinite;
    opacity: 0.9;
    text-shadow: 0 0 8px rgba(0,0,0,0.5);
}
@keyframes float-around {
    0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
    25% { transform: translateY(-25px) translateX(10px) rotate(15deg); }
    50% { transform: translateY(0) translateX(0) rotate(0deg); }
    75% { transform: translateY(25px) translateX(-10px) rotate(-15deg); }
}

/* Container */
.container {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10;
    transform-style: preserve-3d;
    transition: opacity 1.5s ease-in-out, transform 0.2s cubic-bezier(0.03, 0.98, 0.52, 0.99);
}

/* Message */
.message {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    color: #fff;
    text-shadow: 0 0 5px #fff,0 0 10px #fff,0 0 20px var(--primary-color),0 0 30px var(--primary-color),0 0 40px var(--primary-color);
    margin-bottom: 30px;
    animation: pulse-text 2s infinite ease-in-out;
}
@keyframes pulse-text {
    0%,100% { text-shadow:0 0 5px #fff,0 0 10px #fff,0 0 20px var(--primary-color),0 0 30px var(--primary-color),0 0 40px var(--primary-color); }
    50% { text-shadow:0 0 10px #fff,0 0 20px #fff,0 0 30px var(--primary-color),0 0 50px var(--primary-color),0 0 70px var(--primary-color); }
}

.message span {
    display: inline-block;
    opacity: 0;
    transform: translateY(-20px);
    animation: fadeIn-Up 0.8s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes fadeIn-Up {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.cake {
    position: relative;
    left: -15px;
    width: 250px;
    margin: 40px 0;
}
.cake-image { width: 100%; border-radius: 15px; display: block; }
.candle-container { display: flex; justify-content: space-around; position: absolute; width: 50%; top: 24%; left: 25%; }
.candle { width:12px; height:50px; background:linear-gradient(to top,#ff9a9e,#fecfef); border-radius:5px 5px 0 0; position:relative; box-shadow:0 0 5px rgba(255,255,255,0.5);}
.flame { position:absolute; width:14px; height:28px; background-color:#ffd700; border-radius:50% 50% 50% 50% / 60% 60% 40% 40%; top:-33px; left:-1px; animation: realistic-flicker 1.5s infinite ease-in-out; transform-origin:bottom; opacity:1; transition: opacity 0.5s, transform 0.5s, height 0.5s; box-shadow:0 0 10px #ffcc00,0 0 20px #ff8c00,0 0 30px #ff4500;}
.flame.out { opacity:0; height:0; transform:translateY(-20px) scale(0); }
@keyframes realistic-flicker {
    0%,100%{ transform: scaleY(1) skew(0deg); opacity:1; }
    25%{ transform: scaleY(0.9) skew(2deg); opacity:0.9; }
    50%{ transform: scaleY(1.05) skew(-2deg); opacity:1; }
    75%{ transform: scaleY(0.95) skew(1deg); opacity:0.95; }
}

/* Button */
#blow-button {
    font-family:'Poppins', sans-serif;
    font-size:1.2rem;
    padding:15px 35px;
    border:2px solid var(--primary-color);
    border-radius:50px;
    background-color:transparent;
    color:white;
    cursor:pointer;
    text-transform:uppercase;
    letter-spacing:2px;
    position:relative;
    overflow:hidden;
    transition: all 0.3s ease-in-out;
    box-shadow:0 0 15px var(--primary-color),0 0 25px var(--primary-color) inset;
    margin-top:20px;
}
#blow-button:hover { background-color: var(--primary-color); box-shadow:0 0 30px var(--primary-color); }
#blow-button:active { transform: scale(0.95); }

/* Celebration containers */
.confetti-container,.balloon-container,.sparkle-container { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999; }

/* Messages */
.first-msg, .final-msg {
    position:absolute;
    width:100%;
    color:#fff;
    font-family:'Playfair Display', serif;
    text-align:center;
    opacity:0;
    transition:1s ease;
    z-index: 20;
    pointer-events: none;
}
.first-msg { bottom:180px; font-size:clamp(1.2rem,3vw,2rem); text-shadow:0 0 5px #fff,0 0 15px var(--primary-color);}
.final-msg { bottom:50px; font-size:clamp(1.5rem,4vw,2.5rem); text-shadow:0 0 10px #fff,0 0 20px #ff69b4; transform:scale(0.9); }

/* Background Balloons */
.background-balloon {
    position:absolute;
    width:50px;
    height:70px;
    border-radius:50%;
    opacity:0.7;
    animation: float 8s ease-in-out infinite;
}
@keyframes float{
    0%{transform:translateY(0);}
    50%{transform:translateY(-30px);}
    100%{transform:translateY(0);}
}

/* Keyframe for picture movement */
@keyframes float-gently {
    0%, 100% { transform: translateY(0) rotate(-2deg); }
    50% { transform: translateY(-20px) rotate(2deg); }
}

/* --- MODIFIED: Corner Image Containers --- */
.corner-image-container {
    position: fixed;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 1.5s ease-in-out, transform 1.5s ease-in-out;
    z-index: 1002;
}
.corner-image-container.show {
    opacity: 1;
    animation: float-gently 8s ease-in-out infinite;
}
.corner-image {
    width: 250px;
    height: 313px;
    object-fit: cover;
    border-radius: 15px;
    border: 3px solid var(--secondary-color);
    box-shadow: 0 0 20px var(--secondary-color);
    display: block;
}
.top-left { top: 20px; left: 50px; }
.top-right { top: 20px; right: 50px; }
.bottom-left { bottom: 20px; left: 50px; }
.bottom-right { bottom: 20px; right: 50px; }


/* --- NEW: Heart Emoji Effect --- */
.heart-effect {
    position: absolute;
    font-size: 2rem;
    pointer-events: none;
    opacity: 0;
    animation: fly-out 1.2s ease-out forwards;
    z-index: 5;
}

@keyframes fly-out {
    0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    100% {
        transform: translate(var(--x), var(--y)) scale(0);
        opacity: 0;
    }
}

/* --- Decorative Corner Flourishes --- */
.corner-flourish {
    position: absolute;
    width: 25px;
    height: 25px;
    border-color: var(--secondary-color);
    border-style: solid;
    z-index: 1003;
    filter: drop-shadow(0 0 5px var(--secondary-color));
}
.flourish-tl {
    top: -5px;
    left: -5px;
    border-width: 4px 0 0 4px;
    border-radius: 15px 0 0 0;
}
.flourish-tr {
    top: -5px;
    right: -5px;
    border-width: 4px 4px 0 0;
    border-radius: 0 15px 0 0;
}
.flourish-bl {
    bottom: -5px;
    left: -5px;
    border-width: 0 0 4px 4px;
    border-radius: 0 0 0 15px;
}
.flourish-br {
    bottom: -5px;
    right: -5px;
    border-width: 0 4px 4px 0;
    border-radius: 0 0 15px 0;
}

/* --- NEW: Decorative Bow Wrapper --- */
.image-bow {
    /* This is the center knot */
    position: absolute;
    top: -8px;
    left: -8px;
    width: 16px;
    height: 16px;
    background: var(--secondary-color); /* Gold knot */
    border-radius: 50%;
    z-index: 1004; /* Above the flourishes */
    box-shadow: 0 0 8px rgba(0,0,0,0.5);
}
.image-bow::before, .image-bow::after {
    content: '';
    position: absolute;
    width: 30px;
    height: 25px;
    background: var(--primary-color); /* Pink loop */
    border: 2px solid var(--secondary-color);
    z-index: -1; /* Place behind the knot */
}
/* Left loop */
.image-bow::before {
    border-radius: 50% 50% 0 50%;
    transform: rotate(-25deg);
    top: -15px;
    left: -25px;
}
/* Right loop */
.image-bow::after {
    border-radius: 50% 50% 50% 0;
    transform: rotate(25deg);
    top: -15px;
    left: 10px;
}


/* VIBRANT BANNER DESIGN */
.birthday-banner-container {
    position: fixed;
    top: 40px;
    left: 50%;
    transform: translateX(-50%) scale(0);
    transform-origin: center;
    z-index: 1003;
    opacity: 0;
    transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.birthday-banner-container.show { opacity: 1; transform: translateX(-50%) scale(1); }
.birthday-banner {
    position: relative;
    color: white;
    font-family: 'Pacifico', cursive;
    font-size: 3.5rem;
    padding: 30px 80px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    text-shadow: 0 3px 5px rgba(0,0,0,0.4);
    background: linear-gradient(270deg, #ff79c6, #9c27b0, #ff55a3, #ffd700);
    background-size: 400% 400%;
    animation: animate-gradient 10s ease infinite;
    border-radius: 250px / 100px;
}
@keyframes animate-gradient {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
.birthday-banner span { display: inline-block; opacity: 0; animation: lightUp 0.5s forwards; }
@keyframes lightUp {
    to { opacity: 1; transform: scale(1.05); }
}

/* Glowing cursor follower */
.cursor-follower {
    position: fixed;
    width: 10px;
    height: 10px;
    background: var(--secondary-color);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transition: transform 0.1s linear, opacity 0.3s;
    box-shadow: 0 0 15px var(--secondary-color);
    opacity: 0; /* Starts hidden */
    transform: translate(-50%, -50%); /* Center on cursor */
}
body:hover .cursor-follower {
    opacity: 1; /* Shows on hover */
}


/* Responsive */
@media(max-width:768px){
    .corner-image {
        width: 200px;
        height: 250px;
    }
    .top-left, .bottom-left { left: 30px; }
    .top-right, .bottom-right { right: 30px; }
    .birthday-banner { font-size: 3rem; padding: 25px 60px; }
}
@media(max-width: 600px) {
    .birthday-banner-container { width: 90%; }
    .birthday-banner { font-size: 2.2rem; white-space: normal; text-align: center; padding: 20px 40px; }
}
@media(max-width:480px){
    body { padding: 15px; }
    .cake{ transform:scale(0.7); }
    #blow-button{ font-size:1rem; padding:12px 25px; }
    .corner-image {
        width: 140px;
        height: 175px;
    }
    .corner-image-container.top-left, .corner-image-container.top-right { top: 15px; }
    .corner-image-container.bottom-left, .corner-image-container.bottom-right { bottom: 15px; }
    .top-left, .bottom-left { left: 20px; }
    .top-right, .bottom-right { right: 20px; }
}
</style>
</head>
<body>

<svg width="0" height="0">
  <defs>
    <clipPath id="wave-top" clipPathUnits="objectBoundingBox"><path d="M 0,0 L 1,0 L 1,0.5 C 0.9,1, 0.8,0, 0.7,0.5 S 0.5,1, 0.4,0.5 S 0.2,0, 0.1,0.5 S 0,1, 0,0.5 Z" /></clipPath>
    <clipPath id="wave-bottom" clipPathUnits="objectBoundingBox"><path d="M 0,1 L 1,1 L 1,0.5 C 0.9,0, 0.8,1, 0.7,0.5 S 0.5,0, 0.4,0.5 S 0.2,1, 0.1,0.5 S 0,0, 0,0.5 Z" /></clipPath>
    <clipPath id="wave-left" clipPathUnits="objectBoundingBox"><path d="M 0,0 L 0,1 L 0.5,1 C 1,0.9, 0,0.8, 0.5,0.7 S 1,0.5, 0.5,0.4 S 0,0.2, 0.5,0.1 S 1,0, 0.5,0 Z" /></clipPath>
    <clipPath id="wave-right" clipPathUnits="objectBoundingBox"><path d="M 1,0 L 1,1 L 0.5,1 C 0,0.9, 1,0.8, 0.5,0.7 S 0,0.5, 0.5,0.4 S 1,0.2, 0.5,0.1 S 0,0, 0.5,0 Z" /></clipPath>
  </defs>
</svg>

<div class="ribbon ribbon-top"></div>
<div class="ribbon ribbon-bottom"></div>
<div class="ribbon ribbon-left"></div>
<div class="ribbon ribbon-right"></div>
<div class="gift-container"></div>
<div class="birthday-banner-container">
    <div class="birthday-banner" id="banner-text"></div>
</div>

<div class="container">
    <div class="message" id="initial-message"></div>
    <div class="cake">
        <img src="cake1.png" alt="Birthday Cake" class="cake-image">
        <div class="candle-container">
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
        </div>
    </div>
    <button id="blow-button">Blow Candles</button>
</div>

<div class="first-msg">Happy Birthday Miss pretty and lovely Lipika!</div>
<div class="final-msg">Have a beautiful day, Love you!</div>

<div class="confetti-container"></div>
<div class="balloon-container"></div>
<div class="sparkle-container"></div>

<div class="background-balloon" style="background:pink; left:10%; top:20%; animation-delay:0s;"></div>
<div class="background-balloon" style="background:gold; left:70%; top:50%; animation-delay:2s;"></div>
<div class="background-balloon" style="background:lightblue; left:40%; top:10%; animation-delay:1s;"></div>

<div class="corner-image-container top-left" style="animation-delay: 0s;">
    <div class="image-bow"></div>
    <div class="corner-flourish flourish-tl"></div>
    <div class="corner-flourish flourish-tr"></div>
    <div class="corner-flourish flourish-bl"></div>
    <div class="corner-flourish flourish-br"></div>
    <img src="Lipika1.jpg" alt="Lipika 1" class="corner-image">
</div>
<div class="corner-image-container top-right" style="animation-delay: 1.5s;">
    <div class="image-bow"></div>
    <div class="corner-flourish flourish-tl"></div>
    <div class="corner-flourish flourish-tr"></div>
    <div class="corner-flourish flourish-bl"></div>
    <div class="corner-flourish flourish-br"></div>
    <img src="Lipika2.jpg" alt="Lipika 2" class="corner-image">
</div>
<div class="corner-image-container bottom-left" style="animation-delay: 3s;">
    <div class="image-bow"></div>
    <div class="corner-flourish flourish-tl"></div>
    <div class="corner-flourish flourish-tr"></div>
    <div class="corner-flourish flourish-bl"></div>
    <div class="corner-flourish flourish-br"></div>
    <img src="Lipika3.jpg" alt="Lipika 3" class="corner-image">
</div>
<div class="corner-image-container bottom-right" style="animation-delay: 4.5s;">
    <div class="image-bow"></div>
    <div class="corner-flourish flourish-tl"></div>
    <div class="corner-flourish flourish-tr"></div>
    <div class="corner-flourish flourish-bl"></div>
    <div class="corner-flourish flourish-br"></div>
    <img src="Lipika4.jpg" alt="Lipika 4" class="corner-image">
</div>

<div class="cursor-follower"></div>

<audio id="candle-sound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>
<audio id="celebration-sound" src="https://www.soundjay.com/misc/sounds/fanfare-trumpets-01.mp3"></audio>
<audio id="bg-music" src="Happy Birthday Lipika (Remix).mp3" loop></audio>


<script>
document.addEventListener('DOMContentLoaded', () => {
    // Floating border emojis
    const giftContainer = document.querySelector('.gift-container');
    const emojis = ['🎁', '🎉', '🎈','🌸' , '💞' , '💝' , '🌼', '🎈', '🫧', '🎗', '🎀', '🦋'];
    const numEmojis = 65;
    for (let i = 0; i < numEmojis; i++) {
        const emojiEl = document.createElement('div');
        emojiEl.classList.add('floating-emoji');
        emojiEl.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
        const side = Math.floor(Math.random() * 4);
        let top, left;
        if (side === 0) { top = (Math.random() * 15) + '%'; left = (Math.random() * 100) + '%'; }
        else if (side === 1) { top = (Math.random() * 100) + '%'; left = (Math.random() * 15 + 85) + '%';}
        else if (side === 2) { top = (Math.random() * 15 + 85) + '%'; left = (Math.random() * 100) + '%';}
        else { top = (Math.random() * 100) + '%'; left = (Math.random() * 15) + '%'; }
        emojiEl.style.top = top;
        emojiEl.style.left = left;
        emojiEl.style.fontSize = (Math.random() * 1.5 + 1.5) + 'rem';
        emojiEl.style.animationDuration = (Math.random() * 8 + 7) + 's';
        emojiEl.style.animationDelay = (Math.random() * 7) + 's';
        giftContainer.appendChild(emojiEl);
    }

    // Animate the initial message
    const initialMessage = "Dear Lipika, please blow the candles!";
    const messageContainer = document.getElementById('initial-message');
    initialMessage.split('').forEach((char, index) => {
        const span = document.createElement('span');
        span.innerHTML = char === ' ' ? '&nbsp;' : char;
        span.style.animationDelay = `${index * 0.05}s`;
        messageContainer.appendChild(span);
    });

    // Cursor follower and 3D tilt effect logic
    const cursorFollower = document.querySelector('.cursor-follower');
    const container = document.querySelector('.container');
    document.body.addEventListener('mousemove', (e) => {
        // Cursor follower
        cursorFollower.style.left = `${e.clientX}px`;
        cursorFollower.style.top = `${e.clientY}px`;

        // 3D tilt
        const { clientX, clientY } = e;
        const { innerWidth, innerHeight } = window;
        const x = (clientX / innerWidth - 0.5) * 2;
        const y = (clientY / innerHeight - 0.5) * 2;
        container.style.transform = `perspective(1000px) rotateY(${x * 8}deg) rotateX(${-y * 8}deg)`;
    });

    // --- NEW: Heart effect on picture hover ---
    const imageContainers = document.querySelectorAll('.corner-image-container');
    const heartEmojis = ['❤️', '💖', '💗', '💕', '💓'];

    function createHeart(x, y, container) {
        const heart = document.createElement('div');
        heart.classList.add('heart-effect');
        heart.innerHTML = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];

        // Position the heart at the cursor's location relative to the container
        const rect = container.getBoundingClientRect();
        heart.style.left = `${x - rect.left}px`;
        heart.style.top = `${y - rect.top}px`;

        // Randomize the 3D animation destination for a "coming out" effect
        const destX = (Math.random() - 0.5) * 250;
        const destY = (Math.random() - 0.5) * 250;
        heart.style.setProperty('--x', `${destX}px`);
        heart.style.setProperty('--y', `${destY}px`);

        container.appendChild(heart);

        // Remove the heart from the DOM after the animation completes
        setTimeout(() => {
            heart.remove();
        }, 1200); // Matches the animation duration in CSS
    }

    imageContainers.forEach(container => {
        container.addEventListener('mousemove', (e) => {
            // Throttles the creation of hearts to prevent lag
            if (Math.random() > 0.6) {
                createHeart(e.clientX, e.clientY, container);
            }
        });
    });
});

// Candle blow
document.getElementById('blow-button').addEventListener('click', () => {
    document.getElementById('candle-sound').play();
    document.querySelectorAll('.flame').forEach(f => f.classList.add('out'));

    const msg = document.querySelector('#initial-message');
    const btn = document.getElementById('blow-button');
    msg.style.transition = "opacity 1s ease";
    btn.style.transition = "opacity 1s ease";
    msg.style.opacity = 0;
    btn.style.opacity = 0;

    // Play background music after a short delay
    setTimeout(() => {
        const bgMusic = document.getElementById('bg-music');
        bgMusic.volume = 0.4; // Set a pleasant volume
        bgMusic.play();
    }, 1000);

    setTimeout(() => {
        msg.style.display = "none";
        btn.style.display = "none";
        startCelebration();
        showMessages();
    }, 1000);
});

function animateBannerText() {
    const bannerText = "B'day Girl Lipika Guin";
    const bannerElement = document.getElementById('banner-text');
    bannerElement.innerHTML = '';
    bannerText.split('').forEach((char, index) => {
        const span = document.createElement('span');
        span.innerHTML = char === ' ' ? '&nbsp;' : char;
        span.style.animationDelay = `${index * 0.07}s`;
        bannerElement.appendChild(span);
    });
}

function startCelebration() {
    document.getElementById('celebration-sound').play();
    document.querySelectorAll('.corner-image-container').forEach(img => img.classList.add('show')); // MODIFIED SELECTOR
    document.querySelector('.birthday-banner-container').classList.add('show');
    animateBannerText();

    // Confetti
    const confettiContainer = document.querySelector('.confetti-container');
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        // Mix in heart confetti
        if (Math.random() < 0.3) {
            confetti.innerHTML = '❤️';
            confetti.style.cssText = `position:absolute; font-size: ${Math.random()*15+15}px; left:${Math.random()*100}%; top:-10px;`;
        } else {
            confetti.style.cssText = `position:absolute; width:${Math.random()*8+4}px; height:${Math.random()*8+4}px; background:hsl(${Math.random()*360},100%,60%); left:${Math.random()*100}%; top:-10px;`;
        }
        confettiContainer.appendChild(confetti);
        const fallDuration = 3000 + Math.random() * 2000;
        confetti.animate([
            { transform: `translateY(0) translateX(0) rotate(0deg)` },
            { transform: `translateY(${window.innerHeight + 100}px) translateX(${Math.random() * 200 - 100}px) rotate(${Math.random() * 360}deg)` }
        ], { duration: fallDuration, easing: 'ease-out', iterations: 1 });
        setTimeout(() => confetti.remove(), fallDuration);
    }

    // Balloons with blast effect
    const balloonContainer = document.querySelector('.balloon-container');
    const balloonColors = ['#ffadad', '#ffd6a5', '#fdffb6', '#caffbf', '#9bf6ff', '#a0c4ff', '#bdb2ff', '#ffc6ff'];
    for (let i = 0; i < 15; i++) {
        const balloon = document.createElement('div');
        balloon.style.cssText = `position:absolute; width:50px; height:65px; border-radius:50%; background:${balloonColors[i % balloonColors.length]}; opacity:0.8; bottom:-100px; left:${Math.random()*100}%;`;
        const riseDuration = 5000 + Math.random() * 5000;
        const delay = Math.random() * 2000;
        const animation = balloon.animate([
            { transform: `translateY(0) translateX(0)` },
            { transform: `translateY(-${window.innerHeight + 200}px) translateX(${Math.random() * 100 - 50}px)` }
        ], { duration: riseDuration, easing: 'linear', iterations: 1, delay: delay });
        balloonContainer.appendChild(balloon);
        if (Math.random() < 0.35) {
            const blastTime = delay + (Math.random() * 0.4 + 0.3) * riseDuration;
            setTimeout(() => {
                if (document.body.contains(balloon)) {
                    const rect = balloon.getBoundingClientRect();
                    createBlast(rect.left + rect.width / 2, rect.top + rect.height / 2, balloon.style.background);
                    balloon.remove();
                }
            }, blastTime);
        }
        animation.onfinish = () => { if (document.body.contains(balloon)) { balloon.remove(); } };
    }

    // Sparkles
    const sparkleContainer = document.querySelector('.sparkle-container');
    for (let i = 0; i < 40; i++) {
        const sparkle = document.createElement('div');
        sparkle.style.cssText = `position:absolute; width:5px; height:5px; background:#fff; border-radius:50%; top:${Math.random()*window.innerHeight}px; left:${Math.random()*window.innerWidth}px;`;
        const sparkleDuration = 500 + Math.random() * 500;
        sparkle.animate([
            { transform: 'scale(1)', opacity: 1 }, { transform: 'scale(0)', opacity: 0 }
        ], { duration: sparkleDuration, iterations: Infinity, direction: 'alternate', delay: Math.random() * 1000 });
        sparkleContainer.appendChild(sparkle);
    }
}

function createBlast(x, y, color) {
    const blastContainer = document.querySelector('.confetti-container');
    for (let i = 0; i < 15; i++) {
        const fragment = document.createElement('div');
        fragment.style.cssText = `position:fixed; width:${Math.random()*5+3}px; height:${fragment.style.width}; background:${color}; border-radius:50%; left:${x}px; top:${y}px; pointer-events:none;`;
        const angle = Math.random() * 2 * Math.PI;
        const speed = Math.random() * 60 + 30;
        const vx = speed * Math.cos(angle);
        const vy = speed * Math.sin(angle);
        fragment.animate([
            { transform: 'translate(0, 0) scale(1)', opacity: 1 },
            { transform: `translate(${vx}px, ${vy}px) scale(0)`, opacity: 0 }
        ], { duration: Math.random() * 500 + 400, easing: 'ease-out' });
        blastContainer.appendChild(fragment);
        setTimeout(() => fragment.remove(), 900);
    }
}

function showMessages() {
    const first = document.querySelector('.first-msg');
    const final = document.querySelector('.final-msg');
    setTimeout(() => {
        first.style.opacity = 1;
        first.animate([{ opacity: 0, transform: 'translateY(20px)' }, { opacity: 1, transform: 'translateY(0px)' }], { duration: 1500, fill: 'forwards' });
    }, 500);
    setTimeout(() => {
        final.style.opacity = 1;
        final.animate([{ opacity: 0, transform: 'scale(0.9)' }, { opacity: 1, transform: 'scale(1.1)' }], { duration: 1500, fill: 'forwards' });
    }, 2500);
}
</script>
</body>
</html>
